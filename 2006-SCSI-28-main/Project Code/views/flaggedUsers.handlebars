<section class="py-4">
  <div class="container-fluid px-4">
    <div class="bg-success-subtle rounded-3 p-4 p-md-5 mb-4">
      
      <div class="text-center mb-4">
        <h1 class="display-6 mb-3 text-success">
          <i class="bi bi-flag me-2"></i>Flagged Users
        </h1>
        <p class="mb-0 text-muted">Manage suspended and flagged user accounts</p>
      </div>

      {{#if flaggedUsers.length}}
        <div class="card border-0 shadow-sm">
          <div class="card-body p-0">
            <div class="table-responsive">
              <table class="table table-hover align-middle mb-0">
                <thead class="bg-success text-white">
                  <tr>
                    <th scope="col" class="px-4 py-3">#</th>
                    <th scope="col" class="px-4 py-3">
                      <i class="bi bi-person me-2"></i>Name
                    </th>
                    <th scope="col" class="px-4 py-3">
                      <i class="bi bi-envelope me-2"></i>Email
                    </th>
                    <th scope="col" class="px-4 py-3">
                      <i class="bi bi-shield-exclamation me-2"></i>Status
                    </th>
                  </tr>
                </thead>
                <tbody>
                  {{#each flaggedUsers}}
                    <tr>
                      <td class="px-4 py-3">
                        <span class="fw-semibold text-muted">{{@index}}</span>
                      </td>
                      <td class="px-4 py-3">
                        <div class="fw-semibold text-dark">{{this.name}}</div>
                      </td>
                      <td class="px-4 py-3">
                        <span class="text-muted">{{this.email}}</span>
                      </td>
                      <td class="px-4 py-3">
                        {{#if this.flagged}}
                          <span class="badge bg-danger px-3 py-2">
                            <i class="bi bi-x-circle me-1"></i>Suspended
                          </span>
                        {{else}}
                          <div class="d-flex align-items-center gap-2">
                            <span class="badge bg-success px-3 py-2">
                              <i class="bi bi-check-circle me-1"></i>Active
                            </span>
                            <form class="d-inline" action="/adminQuery/Dashboard/flaggedUsers/suspend/{{this._id}}" method="POST">
                              <button type="submit" class="btn btn-outline-danger btn-sm" 
                                      onclick="return confirm('Are you sure you want to suspend this user?')">
                                <i class="bi bi-ban me-1"></i>Suspend
                              </button>
                            </form>
                          </div>
                        {{/if}}
                      </td>
                    </tr>
                  {{/each}}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      {{else}}
        <div class="text-center py-5">
          <div class="text-success mb-4">
            <i class="bi bi-shield-check" style="font-size: 4rem;"></i>
          </div>
          <h4 class="text-success mb-2">All Clear!</h4>
          <p class="text-muted mb-0">No flagged users at the moment. All users are in good standing.</p>
        </div>
      {{/if}}
      
    </div>
  </div>
</section>
